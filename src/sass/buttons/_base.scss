// Copyright (C) 2018 The Trustees of Indiana University
// SPDX-License-Identifier: BSD-3-Clause

@use '../core' as *;
@use 'sass:math';

.#{$prefix}-button {
  --rvt-color-button: #{$color-crimson-500};
  --rvt-color-button-bg: #{$color-orange-000};
  --rvt-color-button-hover: #{$color-crimson-700};
  --rvt-color-button-bg-hover: #{$color-crimson-000};
  --rvt-color-button-border: #{$color-orange-000};
  --rvt-color-border-hover: #{$color-orange-000};
  --rvt-button-border-width: 1px;
  --rvt-button-border-radius: 0;
  --rvt-gap-button: #{$spacing-xs};
  --rvt-padding-button: 0 #{$spacing-sm};
  --rvt-font-weight-button: #{$font-weight-medium};
  --rvt-height-button: #{$spacing-sm * 3};
  --rvt-outline-width-button: 2px;
  --rvt-color-outline-button: #{$color-crimson-500};

  text-decoration: none;
  line-height: 1.1;
  height: var(--rvt-height-button);
  padding: var(--rvt-padding-button);
  font-weight: var(--rvt-font-weight-button);
  display: inline-flex;
  align-items: center;
  gap: var(--rvt-gap-button);
  background: var(--rvt-color-button-bg);
  color: var(--rvt-color-button);
  cursor: pointer;
  border: var(--rvt-button-border-width) solid var(--rvt-color-button-border);
  border-radius: var(--rvt-button-border-radius);

  &:hover {
    background-color: var(--rvt-color-button-bg-hover);
    color: var(--rvt-color-button-hover);
    border-color: var(--rvt-color-border-hover);
  }

  &:focus {
    outline: var(--rvt-outline-width-button) solid var(--rvt-color-outline-button);
    outline-offset: var(--rvt-outline-width-button);
  }

  &:disabled {
    --rvt-color-button: #{$color-black-300};
    --rvt-color-button-hover: #{$color-black-300};
    --rvt-color-button-bg: #{$color-black-000};
    --rvt-color-button-bg-hover: #{$color-black-000};
    --rvt-color-button-border: #{$color-black-000};
    cursor: not-allowed;
  }

  &--outline {
    --rvt-color-button-bg: #{$color-white-base};
    --rvt-color-button-border: #{$color-orange-100};
  }

  &--solid {
    --rvt-color-button-bg: #{$color-crimson-500};
    --rvt-color-button-border: #{$color-crimson-500};
    --rvt-color-button: #{$color-white-base};
  }

  &--solid:hover {
    --rvt-color-button-hover: #{$color-white-base};
    --rvt-color-button-bg-hover: #{$color-crimson-700};
    --rvt-color-button-border: #{$color-crimson-700};
  }
}

a.#{$prefix}-button {
  &::after {
    @extend %right-arrow-crimson;
    content: " ";
    width: $spacing-sm;
    height: $spacing-sm;
    background-repeat: no-repeat;
    background-position: center;
    transition: all .2s ease;
  }

  &:hover::after {
    transform: translate($spacing-xxs, 0);
  }
}

a[href^="http"].#{$prefix}-button::after {
  @extend %up-arrow-crimson;
}

a[href^="#"].#{$prefix}-button::after {
  @extend %down-arrow-crimson;
}

a.#{$prefix}-button--solid::after {
  @extend %right-arrow-white;
}

a[href^="http"].#{$prefix}-button--solid::after {
   @extend %up-arrow-white;
}

a[href^="#"].#{$prefix}-button--solid::after {
  @extend %down-arrow-white;
}

// Themes
// Crimson theme - default variant
.#{$prefix}-theme-crimson .rvt-button {
  --rvt-color-button: #{$color-white-base};
  --rvt-color-button-bg: #{$color-crimson-500};
  --rvt-color-button-border: #{$color-crimson-500};
  --rvt-color-button-hover: #{$color-white-base};
  --rvt-color-button-bg-hover: #{$color-crimson-500};
  --rvt-color-border-hover: #{$color-white-base};

  &:focus {
    --rvt-color-outline-button: #{$color-white-base};
  }
}

.#{$prefix}-theme-crimson a.#{$prefix}-button::after {
  @extend %right-arrow-white;
}

.#{$prefix}-theme-crimson a[href^="#"].#{$prefix}-button::after {
  @extend %down-arrow-white;
}

.#{$prefix}-theme-crimson a[href^="http"].#{$prefix}-button::after {
  @extend %up-arrow-white;
}

// Crimson theme - solid variant
.#{$prefix}-theme-crimson .rvt-button--solid {
  --rvt-color-button: #{$color-crimson-500};
  --rvt-color-button-bg: #{$color-white-base};
  --rvt-color-button-hover: #{$color-white-base};
  --rvt-color-button-bg-hover: #{$color-crimson-500};
  --rvt-color-button-border: #{$color-white-base};
}
// TODO: When using @extend for these background images
// there were some specificity problems where the default
// Crimson theme button variant was overriding these background
// images. That's why we're not using @extend here.
.#{$prefix}-theme-crimson a.#{$prefix}-button--solid::after {
  background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" fill="%23990000" viewBox="0 0 16 16"><path d="M1 7h10.844L7.737 2.146 9.263.854 15.31 8l-6.047 7.146-1.526-1.292L11.844 9H1V7Z"></path></svg>');
}

.#{$prefix}-theme-crimson a.#{$prefix}-button--solid:hover::after {
  @extend %right-arrow-white;
}

.#{$prefix}-theme-crimson a[href^="#"].#{$prefix}-button--solid::after {
  background-image: url("data:image/svg+xml,%3Csvg fill='%23990000' height='16' viewBox='0 0 16 16' width='16' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M7 1v10.844L2.146 7.737.854 9.263 8 15.31l7.146-6.047-1.292-1.526L9 11.844V1H7Z'%3E%3C/path%3E%3C/svg%3E");
}

.#{$prefix}-theme-crimson a[href^="#"].#{$prefix}-button--solid:hover::after {
  @extend %down-arrow-white;
}

.#{$prefix}-theme-crimson a[href^="http"].#{$prefix}-button--solid::after {
  background-image: url("data:image/svg+xml,%3Csvg fill='%23990000' height='16' viewBox='0 0 16 16' width='16' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10.586 4H4V2h10v10h-2V5.414l-8.293 8.293-1.414-1.414L10.586 4Z'%3E%3C/path%3E%3C/svg%3E");
}

.#{$prefix}-theme-crimson a[href^="http"].#{$prefix}-button--solid:hover::after {
  @extend %up-arrow-white;
}

// Crimson theme - outline variant
.#{$prefix}-theme-crimson .rvt-button--outline {
  --rvt-color-button: #{$color-white-base};
  --rvt-color-button-bg: #{$color-crimson-500};
  --rvt-color-button-hover: #{$color-crimson-500};
  --rvt-color-button-bg-hover: #{$color-white-base};
  --rvt-color-button-border: #{$color-white-base};
}

.#{$prefix}-theme-crimson a.#{$prefix}-button--outline::after {
  @extend %right-arrow-white;
}

.#{$prefix}-theme-crimson a.#{$prefix}-button--outline:hover::after {
  @extend %right-arrow-crimson;
}

.#{$prefix}-theme-crimson a[href^="#"].#{$prefix}-button--outline::after {
  @extend %down-arrow-white;
}

.#{$prefix}-theme-crimson a[href^="#"].#{$prefix}-button--outline:hover::after {
  @extend %down-arrow-crimson;
}

.#{$prefix}-theme-crimson a[href^="http"].#{$prefix}-button--outline::after {
  @extend %up-arrow-white;
}

.#{$prefix}-theme-crimson a[href^="http"].#{$prefix}-button--outline:hover::after {
  @extend %up-arrow-crimson;
}

// Dark Theme - default variant
.#{$prefix}-theme-dark .rvt-button {
  --rvt-color-button: #{$color-white-base};
  --rvt-color-button-bg: #{$color-black-500};
  --rvt-color-button-border: #{$color-black-500};
  --rvt-color-button-hover: #{$color-white-base};
  --rvt-color-button-bg-hover: #{$color-black-base};
  --rvt-color-border-hover: #{$color-white-base};

  &:focus {
    --rvt-color-outline-button: #{$color-white-base};
  }
}

.#{$prefix}-theme-dark a.#{$prefix}-button::after {
  @extend %right-arrow-white;
}

.#{$prefix}-theme-dark a[href^="#"].#{$prefix}-button::after {
  @extend %down-arrow-white;
}

.#{$prefix}-theme-dark a[href^="http"].#{$prefix}-button::after {
  @extend %up-arrow-white;
}

// Dark theme - outline variant
.#{$prefix}-theme-dark .rvt-button--outline {
  --rvt-color-button-bg-hover: #{$color-white-base};
  --rvt-color-button-hover: #{$color-black-500};
  --rvt-color-button-border: #{$color-white-base};
}

.#{$prefix}-theme-dark a.#{$prefix}-button--outline::after {
  @extend %right-arrow-white;
}

.#{$prefix}-theme-dark a.#{$prefix}-button--outline:hover::after {
  @extend %right-arrow-dark;
}

.#{$prefix}-theme-dark a[href^="#"].#{$prefix}-button--outline::after {
  @extend %down-arrow-white;
}

.#{$prefix}-theme-dark a[href^="#"].#{$prefix}-button--outline:hover::after {
  @extend %down-arrow-dark;
}

.#{$prefix}-theme-dark a[href^="http"].#{$prefix}-button--outline::after {
  @extend %up-arrow-white;
}

.#{$prefix}-theme-dark a[href^="http"].#{$prefix}-button--outline:hover::after {
  @extend %up-arrow-dark;
}

// Dark theme - solid variant
.#{$prefix}-theme-dark .rvt-button--solid {
  --rvt-color-button-bg: #{$color-white-base};
  --rvt-color-button: #{$color-black-500};
}

.#{$prefix}-theme-dark a.#{$prefix}-button--solid::after {
  @extend %right-arrow-dark;
}

.#{$prefix}-theme-dark a.#{$prefix}-button--solid:hover::after {
  @extend %right-arrow-white;
}

.#{$prefix}-theme-dark a[href^="#"].#{$prefix}-button--solid::after {
  @extend %down-arrow-dark;
}

.#{$prefix}-theme-dark a[href^="#"].#{$prefix}-button--solid:hover::after {
  @extend %down-arrow-white;
}

.#{$prefix}-theme-dark a[href^="http"].#{$prefix}-button--solid::after {
  @extend %up-arrow-dark;
}

.#{$prefix}-theme-dark a[href^="http"].#{$prefix}-button--solid:hover::after {
  @extend %up-arrow-white;
}
